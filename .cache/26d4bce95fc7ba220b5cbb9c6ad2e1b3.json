{"id":"Bs4h","dependencies":[{"name":"/Users/mariepatino/Desktop/portfolio-site/to_push/node_modules/twit/package.json","includedInParent":true,"mtime":1539927843000},{"name":"/Users/mariepatino/Desktop/portfolio-site/to_push/package.json","includedInParent":true,"mtime":1539928357000},{"name":"/Users/mariepatino/Desktop/portfolio-site/to_push/.babelrc","includedInParent":true,"mtime":1537197025000},{"name":"assert","loc":{"line":1,"column":21},"parent":"/Users/mariepatino/Desktop/portfolio-site/to_push/node_modules/twit/lib/file_uploader.js","resolved":"/usr/local/lib/node_modules/parcel/node_modules/assert/assert.js"},{"name":"fs","loc":{"line":2,"column":17},"parent":"/Users/mariepatino/Desktop/portfolio-site/to_push/node_modules/twit/lib/file_uploader.js","resolved":"/usr/local/lib/node_modules/parcel/src/builtins/_empty.js"},{"name":"mime","loc":{"line":3,"column":19},"parent":"/Users/mariepatino/Desktop/portfolio-site/to_push/node_modules/twit/lib/file_uploader.js","resolved":"/Users/mariepatino/Desktop/portfolio-site/to_push/node_modules/mime/mime.js"},{"name":"util","loc":{"line":4,"column":19},"parent":"/Users/mariepatino/Desktop/portfolio-site/to_push/node_modules/twit/lib/file_uploader.js","resolved":"/usr/local/lib/node_modules/parcel/node_modules/util/util.js"}],"generated":{"js":"var i=require(\"assert\"),e=require(\"fs\"),t=require(\"mime\"),a=require(\"util\"),o=15728640,d=5242880,s=function(e,t){i(e),i(e.file_path,\"Must specify `file_path` to upload a file. Got: \"+e.file_path+\".\");this._file_path=e.file_path,this._twit=t,this._isUploading=!1,this._isFileStreamEnded=!1,this._isSharedMedia=!!e.shared};s.prototype.upload=function(i){var t=this;t._initMedia(function(a,o,s){if(a)i(a);else{var n=o.media_id_string,_=0,p=e.createReadStream(t._file_path,{highWatermark:d});p.on(\"data\",function(e){p.pause(),t._isUploading=!0,t._appendMedia(n,e.toString(\"base64\"),_,function(e,a,o){t._isUploading=!1,e?i(e):t._isUploadComplete()?t._finalizeMedia(n,i):(_++,p.resume())})}),p.on(\"end\",function(){t._isFileStreamEnded=!0,t._isUploadComplete()&&t._finalizeMedia(n,i)})}})},s.prototype._isUploadComplete=function(){return!this._isUploading&&this._isFileStreamEnded},s.prototype._finalizeMedia=function(i,e){this._twit.post(\"media/upload\",{command:\"FINALIZE\",media_id:i},e)},s.prototype._appendMedia=function(i,e,t,a){this._twit.post(\"media/upload\",{command:\"APPEND\",media_id:i.toString(),segment_index:t,media:e},a)},s.prototype._initMedia=function(i){var d=t.lookup(this._file_path),s=e.statSync(this._file_path).size,n=this._isSharedMedia,_=\"tweet_image\";if(d.toLowerCase().indexOf(\"gif\")>-1?_=\"tweet_gif\":d.toLowerCase().indexOf(\"video\")>-1&&(_=\"tweet_video\"),s<o)this._twit.post(\"media/upload\",{command:\"INIT\",media_type:d,total_bytes:s,shared:n,media_category:_},i);else{var p=a.format(\"This file is too large. Max size is %dB. Got: %dB.\",o,s);i(new Error(p))}},module.exports=s;","map":{"mappings":[{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"assert","original":{"line":1,"column":4},"generated":{"line":1,"column":4}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"require","original":{"line":1,"column":13},"generated":{"line":1,"column":6}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":1,"column":21},"generated":{"line":1,"column":14}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"fs","original":{"line":2,"column":4},"generated":{"line":1,"column":24}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"require","original":{"line":2,"column":9},"generated":{"line":1,"column":26}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":2,"column":17},"generated":{"line":1,"column":34}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mime","original":{"line":3,"column":4},"generated":{"line":1,"column":40}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"require","original":{"line":3,"column":11},"generated":{"line":1,"column":42}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":3,"column":19},"generated":{"line":1,"column":50}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"util","original":{"line":4,"column":4},"generated":{"line":1,"column":58}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"require","original":{"line":4,"column":11},"generated":{"line":1,"column":60}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":4,"column":19},"generated":{"line":1,"column":68}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"MAX_FILE_SIZE_BYTES","original":{"line":6,"column":4},"generated":{"line":1,"column":76}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":6,"column":26},"generated":{"line":1,"column":78}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"MAX_FILE_CHUNK_BYTES","original":{"line":7,"column":4},"generated":{"line":1,"column":87}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":7,"column":27},"generated":{"line":1,"column":89}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":20,"column":4},"generated":{"line":1,"column":97}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":20,"column":19},"generated":{"line":1,"column":99}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":20,"column":29},"generated":{"line":1,"column":108}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"twit","original":{"line":20,"column":37},"generated":{"line":1,"column":110}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":21,"column":9},"generated":{"line":1,"column":113}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":21,"column":9},"generated":{"line":1,"column":115}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":22,"column":9},"generated":{"line":1,"column":118}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":22,"column":9},"generated":{"line":1,"column":120}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"file_path","original":{"line":22,"column":16},"generated":{"line":1,"column":122}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":22,"column":27},"generated":{"line":1,"column":132}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":22,"column":80},"generated":{"line":1,"column":183}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"file_path","original":{"line":22,"column":87},"generated":{"line":1,"column":185}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":22,"column":99},"generated":{"line":1,"column":195}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":23,"column":13},"generated":{"line":1,"column":200}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_file_path","original":{"line":24,"column":7},"generated":{"line":1,"column":205}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":24,"column":20},"generated":{"line":1,"column":216}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"file_path","original":{"line":24,"column":27},"generated":{"line":1,"column":218}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":23,"column":13},"generated":{"line":1,"column":228}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_twit","original":{"line":25,"column":7},"generated":{"line":1,"column":233}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"twit","original":{"line":25,"column":15},"generated":{"line":1,"column":239}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":23,"column":13},"generated":{"line":1,"column":241}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploading","original":{"line":26,"column":7},"generated":{"line":1,"column":246}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":26,"column":22},"generated":{"line":1,"column":260}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":23,"column":13},"generated":{"line":1,"column":262}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isFileStreamEnded","original":{"line":27,"column":7},"generated":{"line":1,"column":267}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":27,"column":28},"generated":{"line":1,"column":287}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":23,"column":13},"generated":{"line":1,"column":289}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isSharedMedia","original":{"line":28,"column":7},"generated":{"line":1,"column":294}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"params","original":{"line":28,"column":26},"generated":{"line":1,"column":311}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"shared","original":{"line":28,"column":33},"generated":{"line":1,"column":313}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":36,"column":0},"generated":{"line":1,"column":321}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"prototype","original":{"line":36,"column":13},"generated":{"line":1,"column":323}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"upload","original":{"line":36,"column":23},"generated":{"line":1,"column":333}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":36,"column":32},"generated":{"line":1,"column":340}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":36,"column":42},"generated":{"line":1,"column":349}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"self","original":{"line":37,"column":6},"generated":{"line":1,"column":352}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"self","original":{"line":37,"column":6},"generated":{"line":1,"column":356}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":37,"column":13},"generated":{"line":1,"column":358}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_initMedia","original":{"line":40,"column":7},"generated":{"line":1,"column":363}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_initMedia","original":{"line":40,"column":7},"generated":{"line":1,"column":365}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":40,"column":18},"generated":{"line":1,"column":376}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":40,"column":28},"generated":{"line":1,"column":385}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"bodyObj","original":{"line":40,"column":33},"generated":{"line":1,"column":387}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"resp","original":{"line":40,"column":42},"generated":{"line":1,"column":389}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":41,"column":8},"generated":{"line":1,"column":392}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":41,"column":8},"generated":{"line":1,"column":395}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":42,"column":9},"generated":{"line":1,"column":397}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":42,"column":9},"generated":{"line":1,"column":399}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":41,"column":8},"generated":{"line":1,"column":406}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaTmpId","original":{"line":45,"column":10},"generated":{"line":1,"column":407}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaTmpId","original":{"line":45,"column":10},"generated":{"line":1,"column":411}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"bodyObj","original":{"line":45,"column":23},"generated":{"line":1,"column":413}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id_string","original":{"line":45,"column":31},"generated":{"line":1,"column":415}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunkNumber","original":{"line":46,"column":10},"generated":{"line":1,"column":431}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":46,"column":24},"generated":{"line":1,"column":433}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFile","original":{"line":47,"column":10},"generated":{"line":1,"column":435}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"fs","original":{"line":47,"column":22},"generated":{"line":1,"column":437}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"createReadStream","original":{"line":47,"column":25},"generated":{"line":1,"column":439}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"self","original":{"line":47,"column":42},"generated":{"line":1,"column":456}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_file_path","original":{"line":47,"column":47},"generated":{"line":1,"column":458}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":47,"column":59},"generated":{"line":1,"column":469}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"highWatermark","original":{"line":47,"column":61},"generated":{"line":1,"column":470}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"MAX_FILE_CHUNK_BYTES","original":{"line":47,"column":76},"generated":{"line":1,"column":484}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"on","original":{"line":49,"column":16},"generated":{"line":1,"column":488}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"on","original":{"line":49,"column":16},"generated":{"line":1,"column":490}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":49,"column":19},"generated":{"line":1,"column":493}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":49,"column":27},"generated":{"line":1,"column":500}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunk","original":{"line":49,"column":37},"generated":{"line":1,"column":509}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"pause","original":{"line":52,"column":18},"generated":{"line":1,"column":512}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"pause","original":{"line":52,"column":18},"generated":{"line":1,"column":514}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploading","original":{"line":53,"column":13},"generated":{"line":1,"column":522}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploading","original":{"line":53,"column":13},"generated":{"line":1,"column":524}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":53,"column":28},"generated":{"line":1,"column":538}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_appendMedia","original":{"line":55,"column":13},"generated":{"line":1,"column":540}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_appendMedia","original":{"line":55,"column":13},"generated":{"line":1,"column":542}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaTmpId","original":{"line":55,"column":26},"generated":{"line":1,"column":555}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunk","original":{"line":55,"column":38},"generated":{"line":1,"column":557}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"toString","original":{"line":55,"column":44},"generated":{"line":1,"column":559}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":55,"column":53},"generated":{"line":1,"column":568}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunkNumber","original":{"line":55,"column":64},"generated":{"line":1,"column":578}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":55,"column":77},"generated":{"line":1,"column":580}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":55,"column":87},"generated":{"line":1,"column":589}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"bodyObj","original":{"line":55,"column":92},"generated":{"line":1,"column":591}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"resp","original":{"line":55,"column":101},"generated":{"line":1,"column":593}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploading","original":{"line":56,"column":15},"generated":{"line":1,"column":596}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploading","original":{"line":56,"column":15},"generated":{"line":1,"column":598}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":56,"column":30},"generated":{"line":1,"column":612}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":57,"column":14},"generated":{"line":1,"column":614}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":58,"column":15},"generated":{"line":1,"column":616}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"err","original":{"line":58,"column":15},"generated":{"line":1,"column":618}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"self","original":{"line":60,"column":16},"generated":{"line":1,"column":621}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploadComplete","original":{"line":60,"column":21},"generated":{"line":1,"column":623}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_finalizeMedia","original":{"line":62,"column":19},"generated":{"line":1,"column":643}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_finalizeMedia","original":{"line":62,"column":19},"generated":{"line":1,"column":645}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaTmpId","original":{"line":62,"column":34},"generated":{"line":1,"column":660}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":62,"column":46},"generated":{"line":1,"column":662}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunkNumber","original":{"line":65,"column":14},"generated":{"line":1,"column":666}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"resume","original":{"line":66,"column":24},"generated":{"line":1,"column":670}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"resume","original":{"line":66,"column":24},"generated":{"line":1,"column":672}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"on","original":{"line":72,"column":16},"generated":{"line":1,"column":686}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"on","original":{"line":72,"column":16},"generated":{"line":1,"column":688}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":72,"column":19},"generated":{"line":1,"column":691}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":72,"column":26},"generated":{"line":1,"column":697}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isFileStreamEnded","original":{"line":74,"column":13},"generated":{"line":1,"column":708}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isFileStreamEnded","original":{"line":74,"column":13},"generated":{"line":1,"column":710}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":74,"column":34},"generated":{"line":1,"column":730}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"self","original":{"line":75,"column":12},"generated":{"line":1,"column":732}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploadComplete","original":{"line":75,"column":17},"generated":{"line":1,"column":734}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_finalizeMedia","original":{"line":76,"column":15},"generated":{"line":1,"column":755}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_finalizeMedia","original":{"line":76,"column":15},"generated":{"line":1,"column":757}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaTmpId","original":{"line":76,"column":30},"generated":{"line":1,"column":772}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":76,"column":42},"generated":{"line":1,"column":774}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":83,"column":0},"generated":{"line":1,"column":783}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"prototype","original":{"line":83,"column":13},"generated":{"line":1,"column":785}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploadComplete","original":{"line":83,"column":23},"generated":{"line":1,"column":795}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":83,"column":43},"generated":{"line":1,"column":813}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":84,"column":9},"generated":{"line":1,"column":824}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":84,"column":10},"generated":{"line":1,"column":831}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isUploading","original":{"line":84,"column":15},"generated":{"line":1,"column":836}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":84,"column":31},"generated":{"line":1,"column":850}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isFileStreamEnded","original":{"line":84,"column":36},"generated":{"line":1,"column":855}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":93,"column":0},"generated":{"line":1,"column":875}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"prototype","original":{"line":93,"column":13},"generated":{"line":1,"column":877}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_finalizeMedia","original":{"line":93,"column":23},"generated":{"line":1,"column":887}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":93,"column":40},"generated":{"line":1,"column":902}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id","original":{"line":93,"column":49},"generated":{"line":1,"column":911}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":93,"column":59},"generated":{"line":1,"column":913}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":94,"column":13},"generated":{"line":1,"column":916}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_twit","original":{"line":95,"column":7},"generated":{"line":1,"column":921}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"post","original":{"line":95,"column":13},"generated":{"line":1,"column":927}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":95,"column":18},"generated":{"line":1,"column":932}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":95,"column":34},"generated":{"line":1,"column":947}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":96,"column":13},"generated":{"line":1,"column":948}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":96,"column":13},"generated":{"line":1,"column":956}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id","original":{"line":97,"column":14},"generated":{"line":1,"column":967}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id","original":{"line":97,"column":14},"generated":{"line":1,"column":976}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":98,"column":5},"generated":{"line":1,"column":979}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":110,"column":0},"generated":{"line":1,"column":983}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"prototype","original":{"line":110,"column":13},"generated":{"line":1,"column":985}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_appendMedia","original":{"line":110,"column":23},"generated":{"line":1,"column":995}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":110,"column":38},"generated":{"line":1,"column":1008}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id_string","original":{"line":110,"column":47},"generated":{"line":1,"column":1017}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunk_part","original":{"line":110,"column":64},"generated":{"line":1,"column":1019}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"segment_index","original":{"line":110,"column":76},"generated":{"line":1,"column":1021}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":110,"column":91},"generated":{"line":1,"column":1023}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":111,"column":13},"generated":{"line":1,"column":1026}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_twit","original":{"line":112,"column":7},"generated":{"line":1,"column":1031}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"post","original":{"line":112,"column":13},"generated":{"line":1,"column":1037}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":112,"column":18},"generated":{"line":1,"column":1042}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":112,"column":34},"generated":{"line":1,"column":1057}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":113,"column":13},"generated":{"line":1,"column":1058}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":113,"column":13},"generated":{"line":1,"column":1066}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id_string","original":{"line":114,"column":14},"generated":{"line":1,"column":1075}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_id_string","original":{"line":114,"column":14},"generated":{"line":1,"column":1084}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"toString","original":{"line":114,"column":30},"generated":{"line":1,"column":1086}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"segment_index","original":{"line":115,"column":19},"generated":{"line":1,"column":1097}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"segment_index","original":{"line":115,"column":19},"generated":{"line":1,"column":1111}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunk_part","original":{"line":116,"column":11},"generated":{"line":1,"column":1113}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"chunk_part","original":{"line":116,"column":11},"generated":{"line":1,"column":1119}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":117,"column":5},"generated":{"line":1,"column":1122}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":125,"column":0},"generated":{"line":1,"column":1126}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"prototype","original":{"line":125,"column":13},"generated":{"line":1,"column":1128}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_initMedia","original":{"line":125,"column":23},"generated":{"line":1,"column":1138}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":125,"column":36},"generated":{"line":1,"column":1149}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":125,"column":46},"generated":{"line":1,"column":1158}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"self","original":{"line":126,"column":6},"generated":{"line":1,"column":1161}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaType","original":{"line":127,"column":6},"generated":{"line":1,"column":1165}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mime","original":{"line":127,"column":18},"generated":{"line":1,"column":1167}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"lookup","original":{"line":127,"column":23},"generated":{"line":1,"column":1169}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":126,"column":13},"generated":{"line":1,"column":1176}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_file_path","original":{"line":127,"column":35},"generated":{"line":1,"column":1181}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFileSizeBytes","original":{"line":128,"column":6},"generated":{"line":1,"column":1193}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"fs","original":{"line":128,"column":27},"generated":{"line":1,"column":1195}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"statSync","original":{"line":128,"column":30},"generated":{"line":1,"column":1197}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":126,"column":13},"generated":{"line":1,"column":1206}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_file_path","original":{"line":128,"column":44},"generated":{"line":1,"column":1211}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"size","original":{"line":128,"column":56},"generated":{"line":1,"column":1223}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"shared","original":{"line":129,"column":6},"generated":{"line":1,"column":1228}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":126,"column":13},"generated":{"line":1,"column":1230}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_isSharedMedia","original":{"line":129,"column":20},"generated":{"line":1,"column":1235}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_category","original":{"line":130,"column":6},"generated":{"line":1,"column":1250}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":130,"column":23},"generated":{"line":1,"column":1252}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFileSizeBytes","original":{"line":140,"column":6},"generated":{"line":1,"column":1266}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaType","original":{"line":132,"column":6},"generated":{"line":1,"column":1269}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"toLowerCase","original":{"line":132,"column":16},"generated":{"line":1,"column":1271}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"indexOf","original":{"line":132,"column":30},"generated":{"line":1,"column":1285}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":132,"column":38},"generated":{"line":1,"column":1293}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":132,"column":48},"generated":{"line":1,"column":1301}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":133,"column":21},"generated":{"line":1,"column":1303}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":133,"column":21},"generated":{"line":1,"column":1305}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaType","original":{"line":134,"column":13},"generated":{"line":1,"column":1317}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"toLowerCase","original":{"line":134,"column":23},"generated":{"line":1,"column":1319}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"indexOf","original":{"line":134,"column":37},"generated":{"line":1,"column":1333}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":134,"column":45},"generated":{"line":1,"column":1341}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":134,"column":57},"generated":{"line":1,"column":1351}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":135,"column":21},"generated":{"line":1,"column":1355}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":135,"column":21},"generated":{"line":1,"column":1357}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFileSizeBytes","original":{"line":140,"column":6},"generated":{"line":1,"column":1372}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"MAX_FILE_SIZE_BYTES","original":{"line":140,"column":27},"generated":{"line":1,"column":1374}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":126,"column":13},"generated":{"line":1,"column":1376}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"_twit","original":{"line":141,"column":9},"generated":{"line":1,"column":1381}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"post","original":{"line":141,"column":15},"generated":{"line":1,"column":1387}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":141,"column":20},"generated":{"line":1,"column":1392}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":141,"column":36},"generated":{"line":1,"column":1407}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":142,"column":17},"generated":{"line":1,"column":1408}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":142,"column":17},"generated":{"line":1,"column":1416}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaType","original":{"line":143,"column":20},"generated":{"line":1,"column":1423}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaType","original":{"line":143,"column":20},"generated":{"line":1,"column":1434}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFileSizeBytes","original":{"line":144,"column":21},"generated":{"line":1,"column":1436}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFileSizeBytes","original":{"line":144,"column":21},"generated":{"line":1,"column":1448}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"shared","original":{"line":145,"column":16},"generated":{"line":1,"column":1450}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"shared","original":{"line":145,"column":16},"generated":{"line":1,"column":1457}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_category","original":{"line":146,"column":24},"generated":{"line":1,"column":1459}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"media_category","original":{"line":146,"column":24},"generated":{"line":1,"column":1474}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"cb","original":{"line":147,"column":7},"generated":{"line":1,"column":1477}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":148,"column":9},"generated":{"line":1,"column":1484}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"errMsg","original":{"line":149,"column":8},"generated":{"line":1,"column":1485}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"errMsg","original":{"line":149,"column":8},"generated":{"line":1,"column":1489}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"util","original":{"line":149,"column":17},"generated":{"line":1,"column":1491}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"format","original":{"line":149,"column":22},"generated":{"line":1,"column":1493}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":149,"column":29},"generated":{"line":1,"column":1500}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"MAX_FILE_SIZE_BYTES","original":{"line":149,"column":83},"generated":{"line":1,"column":1553}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"mediaFileSizeBytes","original":{"line":149,"column":104},"generated":{"line":1,"column":1555}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":150,"column":7},"generated":{"line":1,"column":1558}},{"source":"../node_modules/twit/lib/file_uploader.js","original":{"line":150,"column":7},"generated":{"line":1,"column":1560}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"Error","original":{"line":150,"column":11},"generated":{"line":1,"column":1564}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"errMsg","original":{"line":150,"column":17},"generated":{"line":1,"column":1570}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"module","original":{"line":154,"column":0},"generated":{"line":1,"column":1576}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"exports","original":{"line":154,"column":7},"generated":{"line":1,"column":1583}},{"source":"../node_modules/twit/lib/file_uploader.js","name":"FileUploader","original":{"line":154,"column":17},"generated":{"line":1,"column":1591}}],"sources":{"../node_modules/twit/lib/file_uploader.js":"var assert = require('assert');\nvar fs = require('fs');\nvar mime = require('mime');\nvar util = require('util');\n\nvar MAX_FILE_SIZE_BYTES = 15 * 1024 * 1024;\nvar MAX_FILE_CHUNK_BYTES = 5 * 1024 * 1024;\n\n/**\n * FileUploader class used to upload a file to twitter via the /media/upload (chunked) API.\n * Usage:\n *   var fu = new FileUploader({ file_path: '/foo/bar/baz.mp4' }, twit);\n *   fu.upload(function (err, bodyObj, resp) {\n *     console.log(err, bodyObj);\n *   })\n *\n * @param  {Object}         params  Object of the form { file_path: String }.\n * @param  {Twit(object)}   twit    Twit instance.\n */\nvar FileUploader = function (params, twit) {\n  assert(params)\n  assert(params.file_path, 'Must specify `file_path` to upload a file. Got: ' + params.file_path + '.')\n  var self = this;\n  self._file_path = params.file_path;\n  self._twit = twit;\n  self._isUploading = false;\n  self._isFileStreamEnded = false;\n  self._isSharedMedia = !!params.shared;\n}\n\n/**\n * Upload a file to Twitter via the /media/upload (chunked) API.\n *\n * @param  {Function} cb function (err, data, resp)\n */\nFileUploader.prototype.upload = function (cb) {\n  var self = this;\n\n  // Send INIT command with file info and get back a media_id_string we can use to APPEND chunks to it.\n  self._initMedia(function (err, bodyObj, resp) {\n    if (err) {\n      cb(err);\n      return;\n    } else {\n      var mediaTmpId = bodyObj.media_id_string;\n      var chunkNumber = 0;\n      var mediaFile = fs.createReadStream(self._file_path, { highWatermark: MAX_FILE_CHUNK_BYTES });\n\n      mediaFile.on('data', function (chunk) {\n        // Pause our file stream from emitting `data` events until the upload of this chunk completes.\n        // Any data that becomes available will remain in the internal buffer.\n        mediaFile.pause();\n        self._isUploading = true;\n\n        self._appendMedia(mediaTmpId, chunk.toString('base64'), chunkNumber, function (err, bodyObj, resp) {\n          self._isUploading = false;\n          if (err) {\n            cb(err);\n          } else {\n            if (self._isUploadComplete()) {\n              // We've hit the end of our stream; send FINALIZE command.\n              self._finalizeMedia(mediaTmpId, cb);\n            } else {\n              // Tell our file stream to start emitting `data` events again.\n              chunkNumber++;\n              mediaFile.resume();\n            }\n          }\n        });\n      });\n\n      mediaFile.on('end', function () {\n        // Mark our file streaming complete, and if done, send FINALIZE command.\n        self._isFileStreamEnded = true;\n        if (self._isUploadComplete()) {\n          self._finalizeMedia(mediaTmpId, cb);\n        }\n      });\n    }\n  })\n}\n\nFileUploader.prototype._isUploadComplete = function () {\n  return !this._isUploading && this._isFileStreamEnded;\n}\n\n  /**\n   * Send FINALIZE command for media object with id `media_id`.\n   *\n   * @param  {String}   media_id\n   * @param  {Function} cb\n   */\nFileUploader.prototype._finalizeMedia = function(media_id, cb) {\n  var self = this;\n  self._twit.post('media/upload', {\n    command: 'FINALIZE',\n    media_id: media_id\n  }, cb);\n}\n\n  /**\n   * Send APPEND command for media object with id `media_id`.\n   * Append the chunk to the media object, then resume streaming our mediaFile.\n   *\n   * @param  {String}   media_id        media_id_string received from Twitter after sending INIT comand.\n   * @param  {String}   chunk_part      Base64-encoded String chunk of the media file.\n   * @param  {Number}   segment_index   Index of the segment.\n   * @param  {Function} cb\n   */\nFileUploader.prototype._appendMedia = function(media_id_string, chunk_part, segment_index, cb) {\n  var self = this;\n  self._twit.post('media/upload', {\n    command: 'APPEND',\n    media_id: media_id_string.toString(),\n    segment_index: segment_index,\n    media: chunk_part,\n  }, cb);\n}\n\n/**\n * Send INIT command for our underlying media object.\n *\n * @param  {Function} cb\n */\nFileUploader.prototype._initMedia = function (cb) {\n  var self = this;\n  var mediaType = mime.lookup(self._file_path);\n  var mediaFileSizeBytes = fs.statSync(self._file_path).size;\n  var shared = self._isSharedMedia;\n  var media_category = 'tweet_image';\n\n  if (mediaType.toLowerCase().indexOf('gif') > -1) {\n    media_category = 'tweet_gif';\n  } else if (mediaType.toLowerCase().indexOf('video') > -1) {\n    media_category = 'tweet_video';\n  }\n\n  // Check the file size - it should not go over 15MB for video.\n  // See https://dev.twitter.com/rest/reference/post/media/upload-chunked\n  if (mediaFileSizeBytes < MAX_FILE_SIZE_BYTES) {\n    self._twit.post('media/upload', {\n      'command': 'INIT',\n      'media_type': mediaType,\n      'total_bytes': mediaFileSizeBytes,\n      'shared': shared,\n      'media_category': media_category\n    }, cb);\n  } else {\n    var errMsg = util.format('This file is too large. Max size is %dB. Got: %dB.', MAX_FILE_SIZE_BYTES, mediaFileSizeBytes);\n    cb(new Error(errMsg));\n  }\n}\n\nmodule.exports = FileUploader\n"},"lineCount":null}},"hash":"5edbc5ce2d50cad8595aa35cf2abc848","cacheData":{"env":{}}}